<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Apache James - Mail and News server - James 2.3 - Using TLS</title>
<LINK TITLE="Style" HREF="stylesheet.css" TYPE="text/css" REL="stylesheet"/>
</head>
<body>
<table cellspacing="0" width="100%" border="0" class="page-header">
<!--PAGE HEADER-->
<tr>
<td colspan="2">
<!--ASF LOGO-->
<a href="http://www.apache.org/">
<img border="0" alt="The ASF" align="left" src="http://www.apache.org/images/asf_logo_wide.gif"/>
</a>
<!--PROJECT LOGO-->
<a href="http://james.apache.org/">
<img border="0" alt="James - Java Apache Mail Enterprise Server" align="right" src="./images/james-logo.jpg"/>
</a>
</td>
</tr>
</table>
<table cellspacing="4" width="100%" border="0">
<tr>
<!--LEFT SIDE NAVIGATION-->
<td nowrap="true" valign="top" class="left-navbar">
<table cellpadding="0" cellspacing="0" width="100%" border="0">
<tr>
<td>
<a href="http://apachecon.com">
<img border="0" alt="ApacheCon Promotion" align="left" src="http://www.apache.org/ads/ApacheCon/234x60-2006-us.gif"/>
</a>
</td>
</tr>
</table>
<navbar name="lhs">

    <p>
<strong>Concepts</strong>
</p>
<ul>
<li>
<a href="./summary.html">Summary</a>
</li>
<li>
<a href="./spoolmanager.html">SpoolManager</a>
</li>
<li>
<a href="./repositories.html">Repositories</a>
</li>
<li>
<a href="./mailet_api.html">The Mailet API</a>
</li>
</ul>
    
    <p>
<strong>How to...</strong>
</p>
<ul>
<li>
<a href="./build_instructions.html">Build James</a>
</li>
<li>
<a href="./installation_instructions.html">Install James</a>
</li>
</ul>
    
    <p>
<strong>Configuration</strong>
</p>
<ul>
<li>
<a href="./dns_configuration.html">DNS Server</a>
</li>
<li>
<a href="./pop3_configuration.html">POP3 Server</a>
</li>
<li>
<a href="./smtp_configuration.html">SMTP Server</a>
</li>
<li>
<a href="./nntp_configuration.html">NNTP Server</a>
</li>
<li>
<a href="./fetchmail_configuration.html">FetchMail</a>
</li>
<li>
<a href="./remotemanager_configuration.html">RemoteManager</a>
</li>
<li>
<a href="./spoolmanager_configuration.html">SpoolManager</a>
</li>
<li>
<a href="./serverwide_configuration.html">Server-wide</a>
</li>
<li>
<a href="./adding_users.html">Adding Users</a>
</li>
<li>
<a href="./provided_matchers.html">Provided Matchers</a>
</li>
<li>
<a href="./provided_mailets.html">Provided Mailets</a>
</li>
</ul>
    
    <p>
<strong>Common Configurations</strong>
</p>
<ul>
<li>
<a href="./smtp_auth.html">Using SMTP AUTH</a>
</li>
<li>
<a href="./using_database.html">Using a Database with James</a>
</li>
<li>
<a href="./usingTLS.html">Using TLS/SSL</a>
</li>
<li>
<a href="./james_and_sendmail.html">James and Sendmail</a>
</li>
<li>
<a href="./mailing_lists.html">Creating Mailing Lists</a>
</li>
</ul>
    
    <p>
<strong>Customization</strong>
</p>
<ul>
<li>
<a href="./custom_matcher.html">How to write a custom Matcher</a>
</li>
<li>
<a href="./custom_mailet.html">How to write a custom Mailet</a>
</li>
</ul>
    
    <p>
<strong>Project</strong>
</p>
<ul>
<li>
<a href="./changelog.html">Changelog</a>
</li>
</ul>

   </navbar>
</td>
<!--MAIN BODY-->
<td align="left" valign="top" class="main-body">
<div class="section">
<div class="section-header">
<a name="James 2.3 - Using TLS">
<strong>James 2.3 - Using TLS</strong>
</a>
</div>
<p>
<div class="section-body">

<p>
This document explains how to enable James 2.3 services to use Transport Layer Security (TLS) for encrypted client-server communication.</p>

<div class="subsection">
<div class="subsection-header">
<a name="Making TLS/SSL Server Sockets Available Inside James">
<strong>Making TLS/SSL Server Sockets Available Inside James</strong>
</a>
</div>
<div class="subsection-body">
<p>James uses the Sun Java Secure Sockets Extension (JSSE) infrastructure to provide TLS/SSL 
sockets.  JSSE comes packaged with several vendor Java distributions (i.e. Sun Java 1.4.x, 
IBM Java 1.3.x).  For these distributions, please follow the vendor provided instructions for
configuring the JVM to use JSSE services.</p>

<p>If you are using a Java distribution that does not include JSSE as part of the 
distribution you will need to download the JSSE package separately.  It can be obtained from 
<a href="http://java.sun.com/products/jsse">here</a>.  Please follow Sun's instructions for installation 
and configuration of JSSE.</p>
<p>In either case, you will need to statically define a JSSE TLS provider.  In general, this 
is the default installation.</p>
<p>Once you've installed JSSE, James still needs to be configured to take advantage of the JSSE
functionality.</p>
</div>
</div>
<div class="subsection">
<div class="subsection-header">
<a name="Certificate Keystores">
<strong>Certificate Keystores</strong>
</a>
</div>
<div class="subsection-body">
<p>To use TLS/SSL inside James you will need a certificate keystore.</p>
</div>
</div>
<div class="subsection">
<div class="subsection-header">
<a name="Configuring the Server Socket Factory">
<strong>Configuring the Server Socket Factory</strong>
</a>
</div>
<div class="subsection-body">
<p>The out of the box configuration file contains a template for the SSL configuration in place.  Specifically, 
in the sockets block, under the server-sockets element, there is a commented out factory with the 
name "ssl".  The first step to configuring the server socket factory is uncommenting out this element.</p>
<p>The factory element contains several children.  Of these, it should only be necessary to adjust two or three children.</p>
<p>The required file element specifies the location of the keystore to be used by the factory.  This is specified
as a file path using Unix-style formatting.  The path is taken to be relative to the apps/james/ subdirectory of
the application installation directory unless an absolute path is specified.</p>
<p>The password element should be set to the keystore password.  This password should have been specified 
when the keystore was created, and it is required to open the keystore.  This value is required.</p>
<p>Finally, it may be necessary to adjust the type element.  This element can take on any keystore type 
supported by the JSSE provider being used (see the JSSE documentation for details).  The out of the box 
configuration specifies JKS (Java Keystore).</p>
<p>The remaining children should not need to be deleted or adjusted.</p>
</div>
</div>
<div class="subsection">
<div class="subsection-header">
<a name="Configuring a Service to Use TLS">
<strong>Configuring a Service to Use TLS</strong>
</a>
</div>
<div class="subsection-body">
<p>Each of the services - <a href="smtp_configuration.html">SMTP</a>, 
<a href="pop3_configuration.html">POP3</a>, <a href="nntp_configuration.html">NNTP</a>, 
and <a href="remotemanager_configuration.html">RemoteManager</a> - supports use of TLS.  Each of
these services has an optional boolean configuration element <b>useTLS</b> which is used to toggle 
use of TLS for the service.  When this value is set to true, that particular service will use the "ssl" 
server socket factory to spawn server sockets.</p>
</div>
</div>
<div class="subsection">
<div class="subsection-header">
<a name="Verifying a TLS-enabled James Service">
<strong>Verifying a TLS-enabled James Service</strong>
</a>
</div>
<div class="subsection-body">
<p>After you've configured a particular service to use TLS/SSL connections, the service port 
should no longer accept unencrypted TCP/IP connections.  This can be tested by using a telnet 
client to directly connect to the service port.  The telnet connection should simply hang until 
the client times out.</p>
<p>
To validate that the port is properly accepting SSL connections an SSL client can be used to 
open a connection to the service port.  One such client is OpenSSL, available from the 
<a href="http://www.openssl.org">OpenSSL web site</a>.  Follow the instructions provided with 
the SSL client to create a connection to the service port.  Upon connection, the usual 
service greeting should appear.</p>
</div>
</div>
</div>
</p>
</div>
</td>
</tr>
<!--FOOTER SEPARATOR-->
<tr>
<td colspan="2">
<hr size="1" noshade=""/>
</td>
</tr>
<tr>
<td colspan="2">
<div class="page-footer">
<em>
        Copyright © 1999-2006, The Apache Software Foundation
        </em>
</div>
</td>
</tr>
</table>
</body>
</html>
