<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd">

<!--
 ! Licensed to the Apache Software Foundation (ASF) under one   !
 ! or more contributor license agreements.  See the NOTICE file !
 ! distributed with this work for additional information        !
 ! regarding copyright ownership.  The ASF licenses this file   !
 ! to you under the Apache License, Version 2.0 (the            !
 ! "License"); you may not use this file except in compliance   !
 ! with the License.  You may obtain a copy of the License at   !
 !                                                              !
 !   http://www.apache.org/licenses/LICENSE-2.0                 !
 !                                                              !
 ! Unless required by applicable law or agreed to in writing,   !
 ! software distributed under the License is distributed on an  !
 ! "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY       !
 ! KIND, either express or implied.  See the License for the    !
 ! specific language governing permissions and limitations      !
 ! under the License.                                           !
 -->


<beans>

    <!--
         beans which replace Avalon specific container logic
    -->

    <bean id="serviceManager" class="org.apache.james.container.spring.adaptor.DefaultServiceManagerFactory" />

    <bean name="logWorker" class="org.apache.james.container.spring.logging.SystemConsoleLogWorker" />

    <bean name="logger, loggerMap" class="org.apache.james.container.spring.adaptor.LoggingBridge" >
        <property name="logWorker" ref="logWorker" />
    </bean>

    <bean id="configurationProvider" class="org.apache.james.container.spring.adaptor.AvalonConfigurationFileProvider" >
        <property name="configurationPath" value="src/main/config/james-config.xml" />
    </bean>

    <bean id="avalonContext" class="org.apache.james.container.spring.adaptor.AvalonContext" >
        <property name="applicationHome" value="data" />
    </bean>

    <!--
         JMX part
     -->

    <!-- <bean id="exporter" class="org.springframework.jmx.export.MBeanExporter" >
        <property name="autodetect" value="true" />
        <property name="namingStrategy" ref="namingStrategy" />
    </bean>

    <bean id="namingStrategy" class="org.springframework.jmx.export.naming.KeyNamingStrategy" >
        <property name="mappings" ><props>
            <prop key="fetchmail" >bean:name=fetchmail</prop>
            <prop key="smtpserver" >bean:name=smtpserver</prop>
            <prop key="James" >bean:name=James</prop>
            <prop key="dnsserver" >bean:name=dnsserver</prop>
            <prop key="remotemanager" >bean:name=remotemanager</prop>
            <prop key="pop3server" >bean:name=pop3server</prop>
            <prop key="nntpserver" >bean:name=nntpserver</prop>
        </props></property>
    </bean>
    -->

    <bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean" />

    <!--
         beans managing bootstrapping and component lifecycle
    -->
    <bean id="loggerPropagator" class="org.apache.james.container.spring.lifecycle.LoggerPropagator" />

    <bean id="contextPropagator" class="org.apache.james.container.spring.lifecycle.ContextPropagator" />

    <bean id="servicePropagator" class="org.apache.james.container.spring.lifecycle.ServicePropagator" />

</beans>




