<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="James" transaction-type="RESOURCE_LOCAL">
        <!-- Mailbox stuff-->
        <class>org.apache.james.imap.jpa.mail.model.JPAHeader</class>
        <class>org.apache.james.imap.jpa.mail.model.JPAMailbox</class>
        <class>org.apache.james.imap.jpa.mail.model.AbstractJPAMessage</class>
        <class>org.apache.james.imap.jpa.mail.model.AbstractJPAMailboxMembership</class>
        <!-- This needs to get used when you want to use streaming. Remember to comment the following classes
             org.apache.james.imap.jpa.mail.model.JPAMailboxMembership
             org.apache.james.imap.jpa.mail.model.JPAMessage
             
             If you don't do this the EntityManager will get confused
         -->
         <!-- 
        <class>org.apache.james.imap.jpa.mail.model.openjpa.JPAStreamingMailboxMembership</class>
        <class>org.apache.james.imap.jpa.mail.model.openjpa.JPAStreamingMessage</class>
         -->
         
         <!-- Comment if you want to use streaming -->
        <class>org.apache.james.imap.jpa.mail.model.JPAMailboxMembership</class>
        <class>org.apache.james.imap.jpa.mail.model.JPAMessage</class>
        <class>org.apache.james.imap.jpa.mail.model.JPAProperty</class>
        <class>org.apache.james.imap.jpa.user.model.JPASubscription</class>

        <!-- UsersRepository -->
        <class>org.apache.james.server.jpa.JPAUser</class>

        <properties>
            <!--  create tables on startup -->
            <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)"/>
        
        </properties>
    </persistence-unit>
</persistence>
