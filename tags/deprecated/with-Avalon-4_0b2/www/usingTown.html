<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<!-- Content Stylesheet for Site -->

        
<!-- start the processing -->
    <!-- ====================================================================== -->
    <!-- Main Page Section -->
    <!-- ====================================================================== -->
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>

                                                    <meta name="author" value="Serge Knystautas">
            <meta name="email" value="sergek@lokitech.com">
            
            <title>The Jakarta James Site - James 1.2.1 - RDBMS support via Town</title>
        </head>

        <body bgcolor="#ffffff" text="#000000" link="#525D76">        
            <table border="0" width="100%" cellspacing="0">
                <!-- TOP IMAGE -->
                <tr>
                    <td align="left">
<a href="http://jakarta.apache.org"><img src="http://jakarta.apache.org/images/jakarta-logo.gif" border="0"/></a>
</td>
<td align="right">
<a href="http://jakarta.apache.org/james/"><img src="./images/james-logo.jpg" alt="JAMES - Java Apache Mail Enterprise Server" border="0"/></a>
</td>
                </tr>
            </table>
            <table border="0" width="100%" cellspacing="4">
                <tr><td colspan="2">
                    <hr noshade="" size="1"/>
                </td></tr>
                
                <tr>
                    <!-- LEFT SIDE NAVIGATION -->
                    <td valign="top" nowrap="true">
                                <p><strong>James</strong></p>
        <ul>
                    <li>    <a href="./index.html">Overview</a>
</li>
                    <li>    <a href="./install.html">Install</a>
</li>
                    <li>    <a href="./configuration_v1_2.html">Configuration</a>
</li>
                    <li>    <a href="./architecture_v1_2.html">Architecture</a>
</li>
                    <li>    <a href="./code-standards.html">Coding Standards</a>
</li>
                    <li>    <a href="./license.html">License</a>
</li>
                    <li>    <a href="./todo.html">TODO</a>
</li>
                </ul>
            <p><strong>Download</strong></p>
        <ul>
                    <li>    <a href="http://jakarta.apache.org/site/binindex.html">Binaries</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/site/sourceindex.html">Source Code</a>
</li>
                </ul>
            <p><strong>Guides</strong></p>
        <ul>
                    <li>    <a href="./mailet/index.html">Mailet API</a>
</li>
                    <li>    <a href="./usingLDAP_v1_2.html">Using LDAP</a>
</li>
                    <li>    <a href="./usingTown.html">Using RDBMS</a>
</li>
                    <li>    <a href="./usingTLS_v1_2.html">Using TLS</a>
</li>
                    <li>    <a href="./listservs.html">List Servers</a>
</li>
                    <li>    <a href="./matchers.html">Bundled Matchers</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/james/rfclist">Useful RFCs {web}</a>
</li>
                </ul>
            <p><strong>Get Involved {web}</strong></p>
        <ul>
                    <li>    <a href="http://jakarta.apache.org/site/getinvolved.html">Overview</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/site/cvsindex.html">CVS Repositories</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/site/mail.html">Mailing Lists</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/site/library.html">Reference Library</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/site/bugs.html">Bug Database</a>
</li>
                </ul>
            <p><strong>Jakarta Essentials {web}</strong></p>
        <ul>
                    <li>    <a href="http://jakarta.apache.org/index.html">Front Page</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/site/news.html">News & Status</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/site/mission.html">Mission</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/site/guidelines.html">Guidelines Notes</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/site/faqs.html">FAQs</a>
</li>
                </ul>
            <p><strong>Related Projects {web}</strong></p>
        <ul>
                    <li>    <a href="http://jakarta.apache.org/ant/index.html">Ant</a>
</li>
                    <li>    <a href="http://jakarta.apache.org/avalon/index.html">Avalon</a>
</li>
                </ul>
                        </td>
                    <td align="left" valign="top">
                                                                    <table border="0" cellspacing="0" cellpadding="2" width="100%">
      <tr><td bgcolor="#525D76">
        <font color="#ffffff" face="arial,helvetica,sanserif">
          <a name="James 1.2.1 - RDBMS support via Town"><strong>James 1.2.1 - RDBMS support via Town</strong></a>
        </font>
      </td></tr>
      <tr><td><br/></td></tr>
      <tr><td>
        <blockquote>
                                    <p>
    This document explains how to enable JAMES to use a database to store mail
    messages for spools, user accounts, and other usages.
  </p>
                            </blockquote>
        </p>
      </td></tr>
      <tr><td><br/></td></tr>
    </table>
                                                <table border="0" cellspacing="0" cellpadding="2" width="100%">
      <tr><td bgcolor="#525D76">
        <font color="#ffffff" face="arial,helvetica,sanserif">
          <a name="Obtain a JDBC driver"><strong>Obtain a JDBC driver</strong></a>
        </font>
      </td></tr>
      <tr><td><br/></td></tr>
      <tr><td>
        <blockquote>
                                    <p>
    Obtain a suitable JDBC driver for a suitable vendor.  A non-production
    grade JDBC-ODBC is included in the JDK, and many commercial and free
    drivers are available.  See
    <a href="http://java.sun.com/products/jdbc/drivers/">http://java.sun.com/products/jdbc/drivers/</a>
    for a list of suitable drivers.  JAMES uses the Town library
    (<a href="http://www.working-dogs.com/town/">http://www.working-dogs.com/town/</a>)
    to access a database, and you can use any JDBC 1.X or greater compliant
    database driver.  Town also handles connection pooling.
  </p>
                                                <p>
    Note that as JAMES will repeatedly send large amounts of text and binary
    across this driver, we recommend production grade drivers whenever
    possible.
  </p>
                            </blockquote>
        </p>
      </td></tr>
      <tr><td><br/></td></tr>
    </table>
                                                <table border="0" cellspacing="0" cellpadding="2" width="100%">
      <tr><td bgcolor="#525D76">
        <font color="#ffffff" face="arial,helvetica,sanserif">
          <a name="Define a database connection"><strong>Define a database connection</strong></a>
        </font>
      </td></tr>
      <tr><td><br/></td></tr>
      <tr><td>
        <blockquote>
                                    <p>
    In the <i>var</i> directory of the JAMES distribution, you will find
    several sample database connection definition files.  These are sample
    Properties files that define the necessary information to connect to a
    database.  You may either rename one of these to <i>maildatabase</i>, or
    you may create your own database connection definition file.  Important
    properties to set are the driver classname, the JDBC URL, and the username
    and password.
  </p>
                            </blockquote>
        </p>
      </td></tr>
      <tr><td><br/></td></tr>
    </table>
                                                <table border="0" cellspacing="0" cellpadding="2" width="100%">
      <tr><td bgcolor="#525D76">
        <font color="#ffffff" face="arial,helvetica,sanserif">
          <a name="Create a table in your database"><strong>Create a table in your database</strong></a>
        </font>
      </td></tr>
      <tr><td><br/></td></tr>
      <tr><td>
        <blockquote>
                                    <p>
    JAMES expects to use a table named "Message" in whatever database you've
    specified.  Sample SQL scripts to create this table in SQL Server and
    MySQL are available in this docs directory.  If you are using another
    database, you can hopefully see the necessary structure and can create it
    for your database.  Please submit these to us! (we'll include them in
    future distributions)
  </p>
                            </blockquote>
        </p>
      </td></tr>
      <tr><td><br/></td></tr>
    </table>
                                                <table border="0" cellspacing="0" cellpadding="2" width="100%">
      <tr><td bgcolor="#525D76">
        <font color="#ffffff" face="arial,helvetica,sanserif">
          <a name="Enable a Database Mail Repository"><strong>Enable a Database Mail Repository</strong></a>
        </font>
      </td></tr>
      <tr><td><br/></td></tr>
      <tr><td>
        <blockquote>
                                    <p>
    After the bootstrap startup, when you edit the JAMES.conf.xml file, you
    will see several places that specify a mail or spool repository. 
    Commented out next to several of these entries are alternate settings to
    use the database connection definition defined above.
  </p>
                                                <p>
    The format of the URL to use the database mail or spool repository is
    town://&lt;repositoryname&gt;@&lt;conndef-filename&gt;  The alternate
    settings for the database repository expect the filename to be
    <i>maildatabase</i>, which is why above we recommended you rename it.
  </p>
                            </blockquote>
        </p>
      </td></tr>
      <tr><td><br/></td></tr>
    </table>
                                                <table border="0" cellspacing="0" cellpadding="2" width="100%">
      <tr><td bgcolor="#525D76">
        <font color="#ffffff" face="arial,helvetica,sanserif">
          <a name="Verify JAMES establishes a database connection"><strong>Verify JAMES establishes a database connection</strong></a>
        </font>
      </td></tr>
      <tr><td><br/></td></tr>
      <tr><td>
        <blockquote>
                                    <p>
    In the bin directory where run.bat and run.sh (or whatever directory you
    were in when you started JAMES), you should see a file named something
    like DCB_970616938320.log.  If this file does not exist, JAMES was unable
    to find the connection definition file or it was unable to find the
    database driver.
  </p>
                                                <p>
    Open this file, and you will see the server's attempt to connect to the
    server.  If successful, you will see the log shows one or two open
    connections were established.  If you are seeing repeated attempts to
    reconnect to the database, either the JDBC URL is incorrect, or the
    username and password are incorrect.
  </p>
                            </blockquote>
        </p>
      </td></tr>
      <tr><td><br/></td></tr>
    </table>
                                        </td>
                </tr>

                <!-- FOOTER -->
                <tr><td colspan="2">
                    <hr noshade="" size="1"/>
                </td></tr>
                <tr><td colspan="2">
                    <div align="center"><font color="#525D76" size="-1"><em>
                    Copyright &#169; 1999-2001, Apache Software Foundation
                    </em></font></div>
                </td></tr>
            </table>
        </body>
    </html>
<!-- end the processing -->














